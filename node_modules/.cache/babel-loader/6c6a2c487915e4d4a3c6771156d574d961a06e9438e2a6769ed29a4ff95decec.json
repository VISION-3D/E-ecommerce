{"ast":null,"code":"import { MotionValue } from '../../value/index.mjs';\nimport { addAttrValue } from '../attr/index.mjs';\nimport { addStyleValue } from '../style/index.mjs';\nimport { createSelectorEffect } from '../utils/create-dom-effect.mjs';\nimport { createEffect } from '../utils/create-effect.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\nfunction addSVGPathValue(element, state, key, value) {\n  frame.render(() => element.setAttribute(\"pathLength\", \"1\"));\n  if (key === \"pathOffset\") {\n    return state.set(key, value, () => {\n      // Use unitless value to avoid Safari zoom bug\n      const offset = state.latest[key];\n      element.setAttribute(\"stroke-dashoffset\", `${-offset}`);\n    });\n  } else {\n    if (!state.get(\"stroke-dasharray\")) {\n      state.set(\"stroke-dasharray\", new MotionValue(\"1 1\"), () => {\n        const {\n          pathLength = 1,\n          pathSpacing\n        } = state.latest;\n        // Use unitless values to avoid Safari zoom bug\n        element.setAttribute(\"stroke-dasharray\", `${pathLength} ${pathSpacing ?? 1 - Number(pathLength)}`);\n      });\n    }\n    return state.set(key, value, undefined, state.get(\"stroke-dasharray\"));\n  }\n}\nconst addSVGValue = (element, state, key, value) => {\n  if (key.startsWith(\"path\")) {\n    return addSVGPathValue(element, state, key, value);\n  } else if (key.startsWith(\"attr\")) {\n    return addAttrValue(element, state, convertAttrKey(key), value);\n  }\n  const handler = key in element.style ? addStyleValue : addAttrValue;\n  return handler(element, state, key, value);\n};\nconst svgEffect = /*@__PURE__*/createSelectorEffect(/*@__PURE__*/createEffect(addSVGValue));\nfunction convertAttrKey(key) {\n  return key.replace(/^attr([A-Z])/, (_, firstChar) => firstChar.toLowerCase());\n}\nexport { svgEffect };\n//# sourceMappingURL=index.mjs.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}